(function(){"use strict";var e={4511:function(e,t,s){var o=s(5130),r=s(6768);function i(e,t,s,o,i,a){const l=(0,r.g2)("GameBoard");return(0,r.uX)(),(0,r.Wv)(l)}var a=s(4232);const l={class:"game-board"},n={class:"grid-container"},h={class:"score-text"},c={key:0,class:"game-over-overlay"};function p(e,t,s,o,i,p){const d=(0,r.g2)("ScoreBoard"),u=(0,r.g2)("GameGrid"),m=(0,r.g2)("ShapeSelection"),S=(0,r.g2)("CustomPieceCreator"),g=(0,r.g2)("SelectShapes");return(0,r.uX)(),(0,r.CE)("div",l,[t[8]||(t[8]=(0,r.Lk)("div",{class:"title"},"Power Blocks!!",-1)),(0,r.bF)(d,{highScore:i.highScore,scoreDisplay:i.scoreDisplay,isHighScoreAnimated:i.isHighScoreAnimated},null,8,["highScore","scoreDisplay","isHighScoreAnimated"]),(0,r.Lk)("div",n,[(0,r.bF)(u,{board:i.board,hoverCells:i.hoverCells,onDragover:e.handleDragOver,onDrop:p.handleDrop,ref:"gameBoard"},null,8,["board","hoverCells","onDragover","onDrop"]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.scoreAnimations,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"score-animation",style:(0,a.Tr)(p.getAnimationStyle(e))},[(0,r.eW)(" +"+(0,a.v_)(e.points)+" ",1),t[5]||(t[5]=(0,r.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,r.eW)()),(0,r.Lk)("span",h,(0,a.v_)(e.text),1)],4)))),128))]),(0,r.bF)(m,{shapes:i.shapes,currentShapes:i.currentShapes,onShapeClicked:p.handleShapeClicked,onShapeDragged:p.handleShapeDragged,onShapeDropped:p.handleShapeDropped},null,8,["shapes","currentShapes","onShapeClicked","onShapeDragged","onShapeDropped"]),i.gameOver?((0,r.uX)(),(0,r.CE)("div",c,[t[7]||(t[7]=(0,r.Lk)("div",{class:"game-over-message"},"Game Over!",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>p.resetBoard&&p.resetBoard(...e)),class:"restart-button"},"Restart"),i.history.length>0?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>p.undoMove&&p.undoMove(...e)),class:"back-button"},"Back")):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),i.history.length>0?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>p.undoMove&&p.undoMove(...e)),class:"back-button"},"Back")):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>p.openCustomPieceCreator&&p.openCustomPieceCreator(...e)),class:"create-piece-button"},"Create Your Custom Piece"),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>p.openSelectShapes&&p.openSelectShapes(...e)),class:"open-select-shapes-button"},"Select Shapes"),(0,r.bF)(S,{visible:i.isCustomPieceCreatorVisible,onSave:p.handleCustomPieceSave,onCancel:p.handleCustomPieceCancel},null,8,["visible","onSave","onCancel"]),(0,r.bF)(g,{visible:i.isSelectShapesVisible,shapes:i.shapes,initialSelectedShapes:i.selectedShapes,onSave:p.handleSelectShapesSave,onCancel:p.handleSelectShapesCancel},null,8,["visible","shapes","initialSelectedShapes","onSave","onCancel"])])}s(4114),s(8111),s(1148),s(2489),s(7588),s(1701),s(3579);const d={class:"score-board"},u={class:"high-score"};function m(e,t,s,o,i,l){return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",u,"High Score: "+(0,a.v_)(s.highScore),1),(0,r.Lk)("div",{class:(0,a.C4)(["score",{highlight:s.isHighScoreAnimated}])},(0,a.v_)(s.scoreDisplay),3)])}var S={name:"ScoreBoard",props:{highScore:{type:Number,required:!0},scoreDisplay:{type:Number,required:!0},isHighScoreAnimated:{type:Boolean,required:!0}}},g=s(1241);const f=(0,g.A)(S,[["render",m]]);var C=f;function b(e,t,s,i,l,n){return(0,r.uX)(),(0,r.CE)("div",{class:"grid",onDragover:t[0]||(t[0]=(0,o.D$)(((...e)=>n.handleDragOver&&n.handleDragOver(...e)),["prevent"])),onDrop:t[1]||(t[1]=(...e)=>n.handleDrop&&n.handleDrop(...e)),ref:"gameBoard"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.board,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"row",key:`grid-${t}`},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["cell",{"filled-cell":e,"hover-cell":n.isHoverCell(t,s)}]),key:`cell-${t}-${s}`,style:(0,a.Tr)(n.applyCellStyle(e))},null,6)))),128))])))),128))],544)}var v={name:"GameGrid",props:{board:{type:Array,required:!0},hoverCells:{type:Array,required:!0}},methods:{handleDragOver(e){this.$emit("dragover",e)},handleDrop(e){this.$emit("drop",e)},isHoverCell(e,t){return this.hoverCells.some((s=>s.row===e&&s.col===t))},applyCellStyle(e){return null!==e?{background:`linear-gradient(145deg, ${e}, ${e} 50%, ${e} 50%, ${e} 100%)`}:{}}}};const y=(0,g.A)(v,[["render",b]]);var k=y;const w={class:"shape-selection"};function D(e,t,s,o,i,a){const l=(0,r.g2)("Block");return(0,r.uX)(),(0,r.CE)("div",w,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.currentShapes,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:`${e.name}-${t}`},[(0,r.bF)(l,{shape:s.shapes[e.name],name:e.name,index:t,onShapeClicked:a.handleShapeClicked,onShapeDragged:a.handleShapeDragged,onShapeDropped:a.handleShapeDropped,color:e.color,power:e.power,id:e.id},null,8,["shape","name","index","onShapeClicked","onShapeDragged","onShapeDropped","color","power","id"])])))),128))])}function X(e,t,s,o,i,l){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",{class:"shape",onMousedown:t[0]||(t[0]=(...e)=>l.handleMouseDown&&l.handleMouseDown(...e)),onDragstart:t[1]||(t[1]=(...e)=>l.handleDragStart&&l.handleDragStart(...e)),onDragend:t[2]||(t[2]=(...t)=>e.handleDragEnd&&e.handleDragEnd(...t)),onTouchstart:t[3]||(t[3]=(...e)=>l.handleTouchStart&&l.handleTouchStart(...e)),onTouchmove:t[4]||(t[4]=(...e)=>l.handleTouchMove&&l.handleTouchMove(...e)),onTouchend:t[5]||(t[5]=(...e)=>l.handleTouchEnd&&l.handleTouchEnd(...e)),style:(0,a.Tr)(l.shapeStyle),draggable:"true"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.shape,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"row",key:t},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["block",{fill:l.applyStyles(t,s),dragging:i.isDragging}]),key:s,style:(0,a.Tr)(l.applyStyles(t,s))},null,6)))),128))])))),128))],36),(0,r.eW)(" "+(0,a.v_)(s.power),1)],64)}var O={name:"BlockComponent",props:{name:{type:String,required:!1,default:"Block"},shape:{type:Array,required:!0},index:{type:Number,required:!0},disableDragging:{type:Boolean,default:!1},color:{type:String,required:!0},power:{type:String,required:!1,default:""},id:{type:String,required:!1,default:""}},data(){return{blockStyle:{},offsetX:0,offsetY:0,touchCurrentX:0,touchCurrentY:0,isDragging:!1}},computed:{shapeStyle(){return this.isDragging?{position:"absolute",left:`${this.touchCurrentX}px`,top:`${this.touchCurrentY}px`,zIndex:1e3}:{}}},methods:{applyStyles(e,t){if(this.shape)return this.shape[e][t]?{background:`linear-gradient(145deg, ${this.color}, ${this.color} 50%, ${this.color} 50%, ${this.color} 100%)`}:void 0},handleMouseDown(){this.disableDragging||this.$emit("shapeClicked",{name:this.name,color:this.color,power:this.power,id:this.id})},handleDragStart(e){if(this.disableDragging)return;e.dataTransfer.setData("name",this.name);const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,o=e.clientY-t.top;e.dataTransfer.setData("offsetX",s),e.dataTransfer.setData("offsetY",o)},handleTouchStart(e){if(this.disableDragging)return;e.preventDefault();const t=e.target.parentElement.getBoundingClientRect();this.offsetX=e.touches[0].clientX-t.left,this.offsetY=e.touches[0].clientY-t.top,this.touchCurrentX=e.touches[0].clientX-this.offsetX,this.touchCurrentY=e.touches[0].clientY-this.offsetY-90*this.shape.length,this.isDragging=!0,this.$emit("shapeClicked",{name:this.name,color:this.color,power:this.power,id:this.id})},handleTouchMove(e){if(this.disableDragging)return;const t=e.touches[0];this.touchCurrentX=t.clientX-this.offsetX,this.touchCurrentY=t.clientY-this.offsetY-90*this.shape.length,this.$emit("shapeDragged",{name:this.name,clientX:t.clientX,clientY:t.clientY-this.offsetY-90*this.shape.length,offsetX:this.offsetX,offsetY:this.offsetY})},handleTouchEnd(e){if(this.disableDragging)return;this.isDragging=!1;const t=e.changedTouches[0];this.$emit("shapeDropped",{name:this.name,clientX:t.clientX,clientY:t.clientY-90*this.shape.length,offsetX:this.offsetX,offsetY:this.offsetY})}}};const F=(0,g.A)(O,[["render",X]]);var P=F,E={name:"ShapeSelection",components:{Block:P},props:{shapes:{type:Object,required:!0},currentShapes:{type:Array,required:!0}},methods:{handleShapeClicked(e){this.$emit("shapeClicked",e)},handleShapeDragged(e){this.$emit("shapeDragged",e)},handleShapeDropped(e){this.$emit("shapeDropped",e)}}};const A=(0,g.A)(E,[["render",D]]);var B=A;const $={key:0,class:"custom-piece-overlay"},T={class:"custom-piece-overlay-content"},Y={class:"custom-piece-grid"},M=["onClick"],R={class:"custom-piece-controls"},L=["disabled"];function H(e,t,s,o,i,l){return s.visible?((0,r.uX)(),(0,r.CE)("div",$,[(0,r.Lk)("div",T,[t[2]||(t[2]=(0,r.Lk)("h2",null,"Create Your Custom Piece",-1)),(0,r.Lk)("div",Y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.piece,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"custom-piece-row",key:t},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["custom-piece-cell",{filled:e}]),key:s,onClick:e=>l.toggleCell(t,s)},null,10,M)))),128))])))),128))]),(0,r.Lk)("div",R,[(0,r.Lk)("button",{class:"custom-piece-button",onClick:t[0]||(t[0]=(...e)=>l.savePiece&&l.savePiece(...e)),disabled:l.blockCount>6},"Save",8,L),(0,r.Lk)("button",{class:"custom-piece-button",onClick:t[1]||(t[1]=(...e)=>l.cancel&&l.cancel(...e))},"Cancel")]),(0,r.Lk)("p",null,"Blocks: "+(0,a.v_)(l.blockCount)+" / 6",1)])])):(0,r.Q3)("",!0)}var q={name:"CustomPieceCreator",props:{visible:{type:Boolean,required:!0}},data(){return{piece:Array.from({length:4},(()=>Array(4).fill(0)))}},computed:{blockCount(){return this.piece.flat().filter((e=>1===e)).length}},methods:{toggleCell(e,t){1===this.piece[e][t]?this.piece[e][t]=0:this.blockCount<6&&(this.piece[e][t]=1)},savePiece(){this.$emit("save",this.piece)},cancel(){this.$emit("cancel")}}};const x=(0,g.A)(q,[["render",H]]);var G=x;const I={key:0,class:"select-shapes-overlay"},N={class:"select-shapes-content"},J={class:"select-shapes-grid"},j=["onClick"],K={class:"select-shapes-controls"};function V(e,t,s,o,i,l){const n=(0,r.g2)("Block");return s.visible?((0,r.uX)(),(0,r.CE)("div",I,[(0,r.Lk)("div",N,[(0,r.Lk)("div",J,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.shapes,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["select-shapes-cell",{selected:i.selectedShapes.includes(t)}]),key:t,onClick:e=>l.toggleShapeSelection(t)},[(0,r.bF)(n,{shape:e,name:t,disableDragging:!0},null,8,["shape","name"])],10,j)))),128))]),(0,r.Lk)("div",K,[(0,r.Lk)("button",{class:"select-shapes-button",onClick:t[0]||(t[0]=(...e)=>l.saveSelection&&l.saveSelection(...e))},"Save"),(0,r.Lk)("button",{class:"select-shapes-button",onClick:t[1]||(t[1]=(...e)=>l.cancelSelection&&l.cancelSelection(...e))},"Cancel")])])])):(0,r.Q3)("",!0)}var _={name:"SelectShapes",components:{Block:P},props:{visible:{type:Boolean,required:!0},shapes:{type:Object,required:!0},initialSelectedShapes:{type:Array,required:!0}},data(){return{selectedShapes:[]}},watch:{initialSelectedShapes:{immediate:!0,handler(e){this.selectedShapes=[...e]}}},methods:{toggleShapeSelection(e){const t=this.selectedShapes.indexOf(e);t>-1?this.selectedShapes.splice(t,1):this.selectedShapes.push(e)},saveSelection(){this.$emit("save",this.selectedShapes)},cancelSelection(){this.$emit("cancel")}}};const Q=(0,g.A)(_,[["render",V]]);var W=Q,z={components:{CustomPieceCreator:G,GameGrid:k,ScoreBoard:C,ShapeSelection:B,SelectShapes:W},name:"GameBoard",data(){return{board:Array.from({length:8},(()=>Array(8).fill(null))),shapes:{square:[[1,1],[1,1]],line:[[1,1,1,1,1]],line2:[[1],[1],[1],[1],[1]],line3:[[1,1,1]],line4:[[1,1]],line5:[[1],[1],[1]],line6:[[1],[1]],t:[[1,1,1],[0,1,0]],t2:[[1,0],[1,1],[1,0]],t3:[[0,1,0],[1,1,1]],t4:[[0,1],[1,1],[0,1]],single:[[1]],l:[[1,0],[1,0],[1,1]],l2:[[1,1],[0,1],[0,1]],l3:[[1,1],[1,0],[1,0]],l4:[[1,1,1],[0,0,1]],l5:[[1,1,1],[1,0,0]],j:[[0,1],[0,1],[1,1]],s:[[0,1,1],[1,1,0]],z:[[1,1,0],[0,1,1]],bCorner:[[1,1,1],[1,0,0],[1,0,0]],bCorner2:[[0,0,1],[0,0,1],[1,1,1]],bCorner3:[[1,0,0],[1,0,0],[1,1,1]],bCorner4:[[1,1,1],[0,0,1],[0,0,1]],bSquare:[[1,1,1],[1,1,1],[1,1,1]],rectangle:[[1,1,1],[1,1,1]],rectangle2:[[1,1],[1,1],[1,1]],corner:[[1,1],[0,1]],corner2:[[1,0],[1,1]],corner3:[[0,1],[1,1]],corner4:[[1,1],[1,0]],u:[[1,0,1],[1,1,1]],u2:[[1,1,1],[1,0,1]],u3:[[1,1],[0,1],[1,1]],u4:[[1,1],[1,0],[1,1]]},powers:["bomb","fill-bomb","remove-row","remove-column","fill-row","fill-column","cross-bomb","cross-fill","fill-all"],colors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"],currentShapes:[],selectedShape:{name:"",color:"",power:"",id:""},selectedShapeColor:"",selectedShapePower:"",gameOver:!1,score:0,scoreDisplay:0,highScore:0,isHighScoreAnimated:!1,hoverCells:[],history:[],isCustomPieceCreatorVisible:!1,isSelectShapesVisible:!1,selectedShapes:[],combo:0,rowsOrColumnsCompleted:!1,scoreAnimations:[]}},watch:{score(e,t){this.incrementScoreDisplay(e,t),e>this.highScore&&this.animateHighScore()}},methods:{incrementScoreDisplay(e,t){if(e>t){let s=1;e-t>50?s=10:e-t>10&&(s=5);const o=setInterval((()=>{this.scoreDisplay+=s,this.scoreDisplay>=this.score&&(this.scoreDisplay=this.score,clearInterval(o))}),1)}else this.scoreDisplay=this.score},animateHighScore(){this.isHighScoreAnimated=!0,setTimeout((()=>{this.isHighScoreAnimated=!1}),1e3)},resetBoard(){this.board=Array.from({length:8},(()=>Array(8).fill(null))),this.gameOver=!1,this.highScore=Math.max(this.score,this.highScore),this.score=0,this.combo=0,this.rowsOrColumnsCompleted=!1,this.history=[],this.getRandomShapes(),this.saveState()},addShape(e,t,s){if(this.checkCollision(e,t,s))return;this.saveHistory();let o=0;for(let h=0;h<e.length;h++)for(let r=0;r<e[h].length;r++)1===e[h][r]&&(this.board[t+h][s+r]=this.selectedShape.color,o++);this.score+=o,this.removeShape(this.selectedShape),this.selectedShape.power&&this.applyPowerEffect(this.selectedShape.power,t,s);let{completedRows:r,rowPositions:i}=this.checkRows(),{completedColumns:a,colPositions:l}=this.checkColumns(),n=r+a;if(n>0){this.combo++;const e=10*r,t=10*a,s=10*n,o=n>1?10*n:0,h=10*this.combo,c=s+o+h;this.score+=c,this.rowsOrColumnsCompleted=!0,r>0&&(o+h>0?this.showScoreAnimation(o+h,i[0],0,!0,"Combo"):this.showScoreAnimation(e,i[0],0,!0,"Good")),a>0&&(o+h>0?this.showScoreAnimation(o+h,0,l[0],!1,"Combo"):this.showScoreAnimation(t,0,l[0],!1,"Good"))}this.updateBoard(i,l),0===this.currentShapes.length&&(this.rowsOrColumnsCompleted||(this.combo=0),setTimeout((()=>{this.getRandomShapes()}),600)),setTimeout((()=>{this.gameOver=this.checkGameOver(),this.saveState()}),1e3)},updateBoard(e,t){e.forEach((e=>{this.removeRow(e)})),t.forEach((e=>{this.removeColumn(e)})),setTimeout((()=>{this.checkBoardClear()&&(this.score+=300,this.showScoreAnimation(300,4,4,!0,"Clear"))}),500)},applyPowerEffect(e,t,s){switch(e){case"bomb":this.applyBombPower(t,s);break;case"fill-bomb":this.applyFillBombPower(t,s);break;case"cross-bomb":this.applyCrossBombPower(t,s);break;case"cross-fill":this.applyCrossFillPower(t,s);break;case"fill-all":this.applyFillAllPower();break;case"remove-row":this.applyRemoveRowPower(t);break;case"remove-column":this.applyRemoveColumnPower(s);break;case"fill-row":this.applyFillRowPower(t);break;case"fill-column":this.applyFillColumnPower(s);break}},applyBombPower(e,t){for(let s=e-1;s<=e+1;s++)for(let e=t-1;e<=t+1;e++)this.board[s]&&void 0!==this.board[s][e]&&(this.board[s][e]=null)},applyCrossBombPower(e,t){for(let s=0;s<this.board.length;s++)this.board[s][t]=null;for(let s=0;s<this.board[0].length;s++)this.board[e][s]=null},applyFillAllPower(){this.board=this.board.map((e=>e.map((e=>null===e?this.selectedShape.color:e))))},applyCrossFillPower(e,t){for(let s=0;s<this.board.length;s++)null===this.board[s][t]&&(this.board[s][t]=this.selectedShape.color);for(let s=0;s<this.board[0].length;s++)null===this.board[e][s]&&(this.board[e][s]=this.selectedShape.color)},applyFillBombPower(e,t){for(let s=e-1;s<=e+1;s++)for(let e=t-1;e<=t+1;e++)this.board[s]&&void 0!==this.board[s][e]&&null===this.board[s][e]&&(this.board[s][e]=this.selectedShape.color)},applyRemoveRowPower(e){this.removeRow(e)},applyFillRowPower(e){this.board[e]=this.board[e].map((e=>null===e?this.selectedShape.color:e))},applyFillColumnPower(e){this.board.forEach((t=>t[e]=null===t[e]?this.selectedShape.color:t[e]))},applyRemoveColumnPower(e){this.removeColumn(e)},checkBoardClear(){return this.board.every((e=>e.every((e=>null===e))))},checkCollision(e,t,s){for(let o=0;o<e.length;o++)for(let r=0;r<e[o].length;r++)if(1===e[o][r]&&(void 0===this.board[t+o]||void 0===this.board[t+o][s+r]||null!==this.board[t+o][s+r]))return!0;return!1},checkRows(){let e=[];for(let t=0;t<this.board.length;t++)this.board[t].every((e=>null!==e))&&e.push(t);return{completedRows:e.length,rowPositions:e}},removeRow(e){this.board[e].forEach(((t,s)=>{setTimeout((()=>{this.board[e].splice(s,1,null)}),10*s)}))},checkColumns(){let e=[];for(let t=0;t<this.board[0].length;t++)this.board.every((e=>null!==e[t]))&&e.push(t);return{completedColumns:e.length,colPositions:e}},removeColumn(e){this.board.forEach(((t,s)=>{setTimeout((()=>{this.board[s].splice(e,1,null)}),10*s)}))},checkGameOver(){for(let e of this.currentShapes)for(let t=0;t<=this.board.length-this.shapes[e.name].length;t++)for(let s=0;s<=this.board[0].length-this.shapes[e.name][0].length;s++)if(!this.checkCollision(this.shapes[e.name],t,s))return!1;return!0},handleShapeClicked(e){this.selectedShape={name:e.name,color:e.color,power:e.power,id:e.id}},handleShapeDragged(e){const t=parseFloat(e.offsetX),s=parseFloat(e.offsetY),o=this.$refs.gameBoard.$el.getBoundingClientRect(),r=e.clientX-o.left-t,i=e.clientY-o.top-s,a=Math.floor(i/40),l=Math.floor(r/40);this.updateHoverCells(this.shapes[this.selectedShape.name],a,l)},handleShapeDropped(e){const t=parseFloat(e.offsetX),s=parseFloat(e.offsetY),o=this.$refs.gameBoard.$el.getBoundingClientRect(),r=e.clientX-o.left-t,i=e.clientY-o.top-s,a=Math.floor(i/40),l=Math.floor(r/40);this.addShape(this.shapes[this.selectedShape.name],a,l),this.clearHoverCells()},handleDrop(e){const t=e.dataTransfer.getData("name");if(!t)return;const s=parseFloat(e.dataTransfer.getData("offsetX")),o=parseFloat(e.dataTransfer.getData("offsetY")),r=this.$refs.gameBoard.$el.getBoundingClientRect(),i=e.clientX-r.left-s,a=e.clientY-r.top-o,l=Math.floor(a/40),n=Math.floor(i/40);this.addShape(this.shapes[t],l,n),this.clearHoverCells()},removeShape(e){const t=this.currentShapes.findIndex((t=>t.id===e.id));t>-1&&this.currentShapes.splice(t,1)},getRandomShapes(){this.currentShapes=Array.from({length:3},(()=>{const e=this.selectedShapes[Math.floor(Math.random()*this.selectedShapes.length)];return{name:e,id:Date.now()+Math.random()}})),this.currentShapes.forEach((e=>{e.color=this.colors[Math.floor(Math.random()*this.colors.length)]})),this.currentShapes.forEach((e=>{"single"===e.name&&(e.power=this.powers[Math.floor(Math.random()*this.powers.length)])})),this.checkGameOver()&&this.getRandomShapes(),this.rowsOrColumnsCompleted=!1},applyCellStyle(e){return null!==e?{background:`linear-gradient(145deg, ${e}, ${e} 50%, ${e} 50%, ${e} 100%)`}:{}},updateHoverCells(e,t,s){if(this.hoverCells=[],!this.checkCollision(e,t,s))for(let o=0;o<e.length;o++)for(let r=0;r<e[o].length;r++)1===e[o][r]&&this.hoverCells.push({row:t+o,col:s+r})},clearHoverCells(){this.hoverCells=[]},isHoverCell(e,t){return this.hoverCells.some((s=>s.row===e&&s.col===t))},saveHistory(){this.history.push({board:JSON.parse(JSON.stringify(this.board)),score:this.score,combo:this.combo,rowsOrColumnsCompleted:this.rowsOrColumnsCompleted,currentShapes:JSON.parse(JSON.stringify(this.currentShapes))})},saveState(){const e={board:JSON.parse(JSON.stringify(this.board)),score:this.score,currentShapes:JSON.parse(JSON.stringify(this.currentShapes)),selectedShape:this.selectedShape,history:JSON.parse(JSON.stringify(this.history)),selectedShapes:this.selectedShapes,highScore:this.highScore,combo:this.combo,rowsOrColumnsCompleted:this.rowsOrColumnsCompleted};localStorage.setItem("gameState",JSON.stringify(e))},undoMove(){if(this.history.length>0){const e=this.history.pop();this.board=e.board,this.score=e.score,this.currentShapes=e.currentShapes,this.gameOver=!1,this.combo=e.combo,this.rowsOrColumnsCompleted=e.rowsOrColumnsCompleted}},openCustomPieceCreator(){this.isCustomPieceCreatorVisible=!0},handleCustomPieceSave(e){this.isCustomPieceCreatorVisible=!1;const t=e.map((e=>e.map((e=>e?1:0))));this.shapes.custom=t,this.currentShapes.push({name:"custom",color:"#"+Math.floor(16777215*Math.random()).toString(16)}),this.saveState()},handleCustomPieceCancel(){this.isCustomPieceCreatorVisible=!1},openSelectShapes(){this.isSelectShapesVisible=!0},handleSelectShapesSave(e){this.isSelectShapesVisible=!1,this.selectedShapes=e,this.getRandomShapes(),this.saveState()},handleSelectShapesCancel(){this.isSelectShapesVisible=!1},showScoreAnimation(e,t,s,o,r){const i={points:e,row:t,col:s,isRow:o,text:r,id:Date.now()};this.scoreAnimations.push(i),setTimeout((()=>{this.scoreAnimations=this.scoreAnimations.filter((e=>e.id!==i.id))}),2e3)},getAnimationStyle(e){const t=40,s=e.isRow?e.row*t:4*t,o=e.isRow?4*t:(e.col+1)*t;return{top:`${s}px`,left:`${o}px`,transition:"transform 0.5s, opacity 0.5s",opacity:1}}},mounted(){const e=localStorage.getItem("gameState");if(e){const t=JSON.parse(e);this.board=t.board,this.score=t.score,this.currentShapes=t.currentShapes,this.selectedShape=t.selectedShape,this.history=t.history,this.selectedShapes=t.selectedShapes,this.highScore=t.highScore,this.combo=t.combo,this.rowsOrColumnsCompleted=t.rowsOrColumnsCompleted}else this.selectedShapes=Object.keys(this.shapes),this.resetBoard()}};const U=(0,g.A)(z,[["render",p]]);var Z=U,ee={name:"App",components:{GameBoard:Z}};const te=(0,g.A)(ee,[["render",i]]);var se=te;(0,o.Ef)(se).mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,i){if(!o){var a=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],i=e[c][2];for(var l=!0,n=0;n<o.length;n++)(!1&i||a>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[n])}))?o.splice(n--,1):(l=!1,i<a&&(a=i));if(l){e.splice(c--,1);var h=r();void 0!==h&&(t=h)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,r,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,a=o[0],l=o[1],n=o[2],h=0;if(a.some((function(t){return 0!==e[t]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(n)var c=n(s)}for(t&&t(o);h<a.length;h++)i=a[h],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},o=self["webpackChunkblock_blast"]=self["webpackChunkblock_blast"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(4511)}));o=s.O(o)})();
//# sourceMappingURL=app.dc0205d2.js.map