(function(){"use strict";var e={6601:function(e,t,s){var o=s(5130),r=s(6768);function i(e,t,s,o,i,l){const a=(0,r.g2)("GameBoard");return(0,r.uX)(),(0,r.Wv)(a)}var l=s(4232);const a={class:"game-board"},n={class:"grid-container"},h={class:"score-text"},c={key:0,class:"game-over-overlay"};function p(e,t,s,o,i,p){const d=(0,r.g2)("ScoreBoard"),u=(0,r.g2)("GameGrid"),m=(0,r.g2)("ShapeSelection"),g=(0,r.g2)("CustomPieceCreator"),f=(0,r.g2)("SelectShapes");return(0,r.uX)(),(0,r.CE)("div",a,[t[8]||(t[8]=(0,r.Lk)("div",{class:"title"},"Power Blocks!!",-1)),(0,r.bF)(d,{highScore:i.highScore,scoreDisplay:i.scoreDisplay,isHighScoreAnimated:i.isHighScoreAnimated},null,8,["highScore","scoreDisplay","isHighScoreAnimated"]),(0,r.Lk)("div",n,[(0,r.bF)(u,{board:i.board,hoverCells:i.hoverCells,onDragover:e.handleDragOver,onDrop:p.handleDrop,ref:"gameBoard"},null,8,["board","hoverCells","onDragover","onDrop"]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.scoreAnimations,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:"score-animation",style:(0,l.Tr)(p.getAnimationStyle(e))},[(0,r.eW)(" +"+(0,l.v_)(e.points)+" ",1),t[5]||(t[5]=(0,r.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,r.eW)()),(0,r.Lk)("span",h,(0,l.v_)(e.text),1)],4)))),128))]),(0,r.bF)(m,{shapes:i.shapes,currentShapes:i.currentShapes,onShapeClicked:p.handleShapeClicked,onShapeDragged:p.handleShapeDragged,onShapeDropped:p.handleShapeDropped},null,8,["shapes","currentShapes","onShapeClicked","onShapeDragged","onShapeDropped"]),i.gameOver?((0,r.uX)(),(0,r.CE)("div",c,[t[7]||(t[7]=(0,r.Lk)("div",{class:"game-over-message"},"Game Over!",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>p.resetBoard&&p.resetBoard(...e)),class:"restart-button"},"Restart"),i.history.length>0?((0,r.uX)(),(0,r.CE)("button",{key:0,onClick:t[1]||(t[1]=(...e)=>p.undoMove&&p.undoMove(...e)),class:"back-button"},"Back")):(0,r.Q3)("",!0)])):(0,r.Q3)("",!0),i.history.length>0?((0,r.uX)(),(0,r.CE)("button",{key:1,onClick:t[2]||(t[2]=(...e)=>p.undoMove&&p.undoMove(...e)),class:"back-button"},"Back")):(0,r.Q3)("",!0),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>p.openCustomPieceCreator&&p.openCustomPieceCreator(...e)),class:"create-piece-button"},"Create Your Custom Piece"),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>p.openSelectShapes&&p.openSelectShapes(...e)),class:"open-select-shapes-button"},"Select Shapes"),t[9]||(t[9]=(0,r.Lk)("a",{href:"https://github.com/leonardoad/power-blocks",target:"_blank",rel:"noopener noreferrer",class:"github-badge"},[(0,r.Lk)("svg",{height:"15","aria-hidden":"true",viewBox:"0 0 24 24",version:"1.1",width:"32","data-view-component":"true",class:"github-icon"},[(0,r.Lk)("path",{d:"M12 1C5.9225 1 1 5.9225 1 12C1 16.8675 4.14875 20.9787 8.52125 22.4362C9.07125 22.5325 9.2775 22.2025 9.2775 21.9137C9.2775 21.6525 9.26375 20.7862 9.26375 19.865C6.5 20.3737 5.785 19.1912 5.565 18.5725C5.44125 18.2562 4.905 17.28 4.4375 17.0187C4.0525 16.8125 3.5025 16.3037 4.42375 16.29C5.29 16.2762 5.90875 17.0875 6.115 17.4175C7.105 19.0812 8.68625 18.6137 9.31875 18.325C9.415 17.61 9.70375 17.1287 10.02 16.8537C7.5725 16.5787 5.015 15.63 5.015 11.4225C5.015 10.2262 5.44125 9.23625 6.1425 8.46625C6.0325 8.19125 5.6475 7.06375 6.2525 5.55125C6.2525 5.55125 7.17375 5.2625 9.2775 6.67875C10.1575 6.43125 11.0925 6.3075 12.0275 6.3075C12.9625 6.3075 13.8975 6.43125 14.7775 6.67875C16.8813 5.24875 17.8025 5.55125 17.8025 5.55125C18.4075 7.06375 18.0225 8.19125 17.9125 8.46625C18.6138 9.23625 19.04 10.2125 19.04 11.4225C19.04 15.6437 16.4688 16.5787 14.0213 16.8537C14.42 17.1975 14.7638 17.8575 14.7638 18.8887C14.7638 20.36 14.75 21.5425 14.75 21.9137C14.75 22.2025 14.9563 22.5462 15.5063 22.4362C19.8513 20.9787 23 16.8537 23 12C23 5.9225 18.0775 1 12 1Z"})]),(0,r.eW)(" View on GitHub ")],-1)),(0,r.bF)(g,{visible:i.isCustomPieceCreatorVisible,onSave:p.handleCustomPieceSave,onCancel:p.handleCustomPieceCancel},null,8,["visible","onSave","onCancel"]),(0,r.bF)(f,{visible:i.isSelectShapesVisible,shapes:i.shapes,initialSelectedShapes:i.selectedShapes,onSave:p.handleSelectShapesSave,onCancel:p.handleSelectShapesCancel},null,8,["visible","shapes","initialSelectedShapes","onSave","onCancel"])])}s(4114),s(8111),s(1148),s(2489),s(531),s(7588),s(1701);const d={class:"score-board"},u={class:"high-score"};function m(e,t,s,o,i,a){return(0,r.uX)(),(0,r.CE)("div",d,[(0,r.Lk)("div",u,"High Score: "+(0,l.v_)(s.highScore),1),(0,r.Lk)("div",{class:(0,l.C4)(["score",{highlight:s.isHighScoreAnimated}])},(0,l.v_)(s.scoreDisplay),3)])}var g={name:"ScoreBoard",props:{highScore:{type:Number,required:!0},scoreDisplay:{type:Number,required:!0},isHighScoreAnimated:{type:Boolean,required:!0}}},f=s(1241);const S=(0,f.A)(g,[["render",m]]);var C=S;function b(e,t,s,i,a,n){return(0,r.uX)(),(0,r.CE)("div",{class:"grid",onDragover:t[0]||(t[0]=(0,o.D$)(((...e)=>n.handleDragOver&&n.handleDragOver(...e)),["prevent"])),onDrop:t[1]||(t[1]=(...e)=>n.handleDrop&&n.handleDrop(...e)),ref:"gameBoard"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.board,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"row",key:`grid-${t}`},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,l.C4)(["cell",{"filled-cell":e,"hover-cell":n.isHoverCell(t,s),"hover-x":n.isRemoveCell(t,s)}]),key:`cell-${t}-${s}`,style:(0,l.Tr)(n.applyCellStyle(e))},null,6)))),128))])))),128))],544)}s(3579);var v={name:"GameGrid",props:{board:{type:Array,required:!0},hoverCells:{type:Array,required:!0}},methods:{handleDragOver(e){this.$emit("dragover",e)},handleDrop(e){this.$emit("drop",e)},isHoverCell(e,t){return this.hoverCells.some((s=>s.row===e&&s.col===t))},isRemoveCell(e,t){return this.hoverCells.some((s=>s.row===e&&s.col===t&&s.remove))},applyCellStyle(e){return null!==e?{background:`linear-gradient(145deg, ${e}, ${e} 50%, ${e} 50%, ${e} 100%)`}:{}}}};const y=(0,f.A)(v,[["render",b]]);var k=y;const w={class:"shape-selection"};function D(e,t,s,o,i,l){const a=(0,r.g2)("Block");return(0,r.uX)(),(0,r.CE)("div",w,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.currentShapes,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:`${e.name}-${t}`},[(0,r.bF)(a,{shape:s.shapes[e.name],name:e.name,index:t,onShapeClicked:l.handleShapeClicked,onShapeDragged:l.handleShapeDragged,onShapeDropped:l.handleShapeDropped,color:e.color,power:e.power,id:e.id},null,8,["shape","name","index","onShapeClicked","onShapeDragged","onShapeDropped","color","power","id"])])))),128))])}function X(e,t,s,o,i,a){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",{class:"shape",onMousedown:t[0]||(t[0]=(...e)=>a.handleMouseDown&&a.handleMouseDown(...e)),onMousemove:t[1]||(t[1]=(...e)=>a.handleMouseMove&&a.handleMouseMove(...e)),onMouseup:t[2]||(t[2]=(...e)=>a.handleMouseUp&&a.handleMouseUp(...e)),onTouchstart:t[3]||(t[3]=(...e)=>a.handleTouchStart&&a.handleTouchStart(...e)),onTouchmove:t[4]||(t[4]=(...e)=>a.handleTouchMove&&a.handleTouchMove(...e)),onTouchend:t[5]||(t[5]=(...e)=>a.handleTouchEnd&&a.handleTouchEnd(...e)),style:(0,l.Tr)(a.shapeStyle)},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.shape,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"row",key:t},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,l.C4)(["block",{fill:a.applyStyles(t,s),dragging:i.isDragging}]),key:s,style:(0,l.Tr)(a.applyStyles(t,s))},null,6)))),128))])))),128))],36),(0,r.eW)(" "+(0,l.v_)(s.power),1)],64)}const O=10;var F={name:"BlockComponent",props:{name:{type:String,required:!1,default:"Block"},shape:{type:Array,required:!0},index:{type:Number,required:!0},disableDragging:{type:Boolean,default:!1},color:{type:String,required:!0},power:{type:String,required:!1,default:""},id:{type:String,required:!1,default:""}},data(){return{blockStyle:{},offsetX:0,offsetY:0,touchCurrentX:0,touchCurrentY:0,isDragging:!1}},computed:{shapeStyle(){return this.isDragging?{position:"absolute",left:`${this.touchCurrentX}px`,top:`${this.touchCurrentY}px`,zIndex:1e3}:{}}},methods:{applyStyles(e,t){if(this.shape)return this.shape[e][t]?{background:`linear-gradient(145deg, ${this.color}, ${this.color} 50%, ${this.color} 50%, ${this.color} 100%)`}:void 0},handleMouseDown(e){if(this.disableDragging)return;const t=e.target.getBoundingClientRect();this.offsetX=e.clientX-t.left,this.offsetY=e.clientY-t.top,this.touchCurrentX=e.clientX-this.offsetX,this.touchCurrentY=e.clientY-this.offsetY-O,this.isDragging=!0,this.$emit("shapeClicked",{name:this.name,color:this.color,power:this.power,id:this.id})},handleMouseMove(e){e.preventDefault(),this.isDragging&&!this.disableDragging&&(this.touchCurrentX=e.clientX-this.offsetX,this.touchCurrentY=e.clientY-this.offsetY-O,this.$emit("shapeDragged",{name:this.name,clientX:e.clientX,clientY:e.clientY-this.offsetY-O,offsetX:this.offsetX,offsetY:this.offsetY}))},handleMouseUp(e){this.disableDragging||(this.isDragging=!1,this.$emit("shapeDropped",{name:this.name,clientX:e.clientX,clientY:e.clientY-O,offsetX:this.offsetX,offsetY:this.offsetY}))},handleTouchStart(e){if(this.disableDragging)return;e.preventDefault();const t=e.target.parentElement.getBoundingClientRect();this.offsetX=e.touches[0].clientX-t.left,this.offsetY=e.touches[0].clientY-t.top,this.touchCurrentX=e.touches[0].clientX-this.offsetX,this.touchCurrentY=e.touches[0].clientY-this.offsetY-O,this.isDragging=!0,this.$emit("shapeClicked",{name:this.name,color:this.color,power:this.power,id:this.id})},handleTouchMove(e){if(this.disableDragging)return;const t=e.touches[0];this.touchCurrentX=t.clientX-this.offsetX,this.touchCurrentY=t.clientY-this.offsetY-O,this.$emit("shapeDragged",{name:this.name,clientX:t.clientX,clientY:t.clientY-this.offsetY-O,offsetX:this.offsetX,offsetY:this.offsetY})},handleTouchEnd(e){if(this.disableDragging)return;this.isDragging=!1;const t=e.changedTouches[0];this.$emit("shapeDropped",{name:this.name,clientX:t.clientX,clientY:t.clientY-O,offsetX:this.offsetX,offsetY:this.offsetY})}}};const P=(0,f.A)(F,[["render",X]]);var B=P,Y={name:"ShapeSelection",components:{Block:B},props:{shapes:{type:Object,required:!0},currentShapes:{type:Array,required:!0}},methods:{handleShapeClicked(e){this.$emit("shapeClicked",e)},handleShapeDragged(e){this.$emit("shapeDragged",e)},handleShapeDropped(e){this.$emit("shapeDropped",e)}}};const A=(0,f.A)(Y,[["render",D]]);var E=A;const $={key:0,class:"custom-piece-overlay"},M={class:"custom-piece-overlay-content"},R={class:"custom-piece-grid"},T=["onClick"],L={class:"custom-piece-controls"},H=["disabled"];function x(e,t,s,o,i,a){return s.visible?((0,r.uX)(),(0,r.CE)("div",$,[(0,r.Lk)("div",M,[t[2]||(t[2]=(0,r.Lk)("h2",null,"Create Your Custom Piece",-1)),(0,r.Lk)("div",R,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.piece,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:"custom-piece-row",key:t},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e,((e,s)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,l.C4)(["custom-piece-cell",{filled:e}]),key:s,onClick:e=>a.toggleCell(t,s)},null,10,T)))),128))])))),128))]),(0,r.Lk)("div",L,[(0,r.Lk)("button",{class:"custom-piece-button",onClick:t[0]||(t[0]=(...e)=>a.savePiece&&a.savePiece(...e)),disabled:a.blockCount>6},"Save",8,H),(0,r.Lk)("button",{class:"custom-piece-button",onClick:t[1]||(t[1]=(...e)=>a.cancel&&a.cancel(...e))},"Cancel")]),(0,r.Lk)("p",null,"Blocks: "+(0,l.v_)(a.blockCount)+" / 6",1)])])):(0,r.Q3)("",!0)}var q={name:"CustomPieceCreator",props:{visible:{type:Boolean,required:!0}},data(){return{piece:Array.from({length:4},(()=>Array(4).fill(0)))}},computed:{blockCount(){return this.piece.flat().filter((e=>1===e)).length}},methods:{toggleCell(e,t){1===this.piece[e][t]?this.piece[e][t]=0:this.blockCount<6&&(this.piece[e][t]=1)},savePiece(){this.$emit("save",this.piece)},cancel(){this.$emit("cancel")}}};const G=(0,f.A)(q,[["render",x]]);var I=G;const N={key:0,class:"select-shapes-overlay"},J={class:"select-shapes-content"},V={class:"select-shapes-grid"},_=["onClick"],j={class:"select-shapes-controls"};function K(e,t,s,o,i,a){const n=(0,r.g2)("Block");return s.visible?((0,r.uX)(),(0,r.CE)("div",N,[(0,r.Lk)("div",J,[(0,r.Lk)("div",V,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(s.shapes,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{class:(0,l.C4)(["select-shapes-cell",{selected:i.selectedShapes.includes(t)}]),key:t,onClick:e=>a.toggleShapeSelection(t)},[(0,r.bF)(n,{shape:e,name:t,disableDragging:!0},null,8,["shape","name"])],10,_)))),128))]),(0,r.Lk)("div",j,[(0,r.Lk)("button",{class:"select-shapes-button",onClick:t[0]||(t[0]=(...e)=>a.saveSelection&&a.saveSelection(...e))},"Save"),(0,r.Lk)("button",{class:"select-shapes-button",onClick:t[1]||(t[1]=(...e)=>a.cancelSelection&&a.cancelSelection(...e))},"Cancel")])])])):(0,r.Q3)("",!0)}var Q={name:"SelectShapes",components:{Block:B},props:{visible:{type:Boolean,required:!0},shapes:{type:Object,required:!0},initialSelectedShapes:{type:Array,required:!0}},data(){return{selectedShapes:[]}},watch:{initialSelectedShapes:{immediate:!0,handler(e){this.selectedShapes=[...e]}}},methods:{toggleShapeSelection(e){const t=this.selectedShapes.indexOf(e);t>-1?this.selectedShapes.splice(t,1):this.selectedShapes.push(e)},saveSelection(){this.$emit("save",this.selectedShapes)},cancelSelection(){this.$emit("cancel")}}};const W=(0,f.A)(Q,[["render",K]]);var U=W,z={components:{CustomPieceCreator:I,GameGrid:k,ScoreBoard:C,ShapeSelection:E,SelectShapes:U},name:"GameBoard",data(){return{board:Array.from({length:8},(()=>Array(8).fill(null))),shapes:{square:[[1,1],[1,1]],line:[[1,1,1,1,1]],line2:[[1],[1],[1],[1],[1]],line3:[[1,1,1]],line4:[[1,1]],line5:[[1],[1],[1]],line6:[[1],[1]],t:[[1,1,1],[0,1,0]],t2:[[1,0],[1,1],[1,0]],t3:[[0,1,0],[1,1,1]],t4:[[0,1],[1,1],[0,1]],single:[[1]],l:[[1,0],[1,0],[1,1]],l2:[[1,1],[0,1],[0,1]],l3:[[1,1],[1,0],[1,0]],l4:[[1,1,1],[0,0,1]],l5:[[1,1,1],[1,0,0]],j:[[0,1],[0,1],[1,1]],s:[[0,1,1],[1,1,0]],z:[[1,1,0],[0,1,1]],bCorner:[[1,1,1],[1,0,0],[1,0,0]],bCorner2:[[0,0,1],[0,0,1],[1,1,1]],bCorner3:[[1,0,0],[1,0,0],[1,1,1]],bCorner4:[[1,1,1],[0,0,1],[0,0,1]],bSquare:[[1,1,1],[1,1,1],[1,1,1]],rectangle:[[1,1,1],[1,1,1]],rectangle2:[[1,1],[1,1],[1,1]],corner:[[1,1],[0,1]],corner2:[[1,0],[1,1]],corner3:[[0,1],[1,1]],corner4:[[1,1],[1,0]],u:[[1,0,1],[1,1,1]],u2:[[1,1,1],[1,0,1]],u3:[[1,1],[0,1],[1,1]],u4:[[1,1],[1,0],[1,1]]},powers:["bomb","fill-bomb","remove-row","remove-column","fill-row","fill-column","cross-bomb","cross-fill","fill-all"],colors:["#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF"],currentShapes:[],selectedShape:{name:"",color:"",power:"",id:""},selectedShapeColor:"",selectedShapePower:"",gameOver:!1,score:0,scoreDisplay:0,highScore:0,isHighScoreAnimated:!1,hoverCells:[],history:[],isCustomPieceCreatorVisible:!1,isSelectShapesVisible:!1,selectedShapes:[],combo:0,rowsOrColumnsCompleted:!1,scoreAnimations:[]}},watch:{score(e,t){this.incrementScoreDisplay(e,t),e>this.highScore&&this.animateHighScore()}},methods:{incrementScoreDisplay(e,t){if(e>t){let s=1;e-t>50?s=10:e-t>10&&(s=5);const o=setInterval((()=>{this.scoreDisplay+=s,this.scoreDisplay>=this.score&&(this.scoreDisplay=this.score,clearInterval(o))}),1)}else this.scoreDisplay=this.score},animateHighScore(){this.isHighScoreAnimated=!0,setTimeout((()=>{this.isHighScoreAnimated=!1}),1e3)},resetBoard(){this.board=Array.from({length:8},(()=>Array(8).fill(null))),this.gameOver=!1,this.highScore=Math.max(this.score,this.highScore),this.score=0,this.combo=0,this.rowsOrColumnsCompleted=!1,this.history=[],this.getRandomShapes(),this.saveState()},addShape(e,t,s){if(this.checkCollision(e,t,s))return;this.saveHistory();let o=0;for(let h=0;h<e.length;h++)for(let r=0;r<e[h].length;r++)1===e[h][r]&&(this.board[t+h][s+r]=this.selectedShape.color,o++);this.score+=o,this.removeShape(this.selectedShape),this.selectedShape.power&&this.applyPowerEffect(this.selectedShape.power,t,s);let{completedRows:r,rowPositions:i}=this.checkRows(),{completedColumns:l,colPositions:a}=this.checkColumns(),n=r+l;if(n>0){this.combo++;const e=10*r,t=10*l,s=10*n,o=n>1?10*n:0,h=10*this.combo,c=s+o+h;this.score+=c,this.rowsOrColumnsCompleted=!0,r>0&&(o+h>0?this.showScoreAnimation(o+h,i[0],0,!0,"Combo"):this.showScoreAnimation(e,i[0],0,!0,"Good")),l>0&&(o+h>0?this.showScoreAnimation(o+h,0,a[0],!1,"Combo"):this.showScoreAnimation(t,0,a[0],!1,"Good"))}this.updateBoard(i,a),0===this.currentShapes.length&&(this.rowsOrColumnsCompleted||(this.combo=0),setTimeout((()=>{this.getRandomShapes()}),600)),setTimeout((()=>{this.gameOver=this.checkGameOver(),this.saveState()}),1e3)},updateBoard(e,t){e.forEach((e=>{this.removeRow(e)})),t.forEach((e=>{this.removeColumn(e)})),setTimeout((()=>{this.checkBoardClear()&&(this.score+=300,this.showScoreAnimation(300,4,4,!0,"Clear"))}),500)},applyPowerEffect(e,t,s){switch(e){case"bomb":this.applyBombPower(t,s);break;case"fill-bomb":this.applyFillBombPower(t,s);break;case"cross-bomb":this.applyCrossBombPower(t,s);break;case"cross-fill":this.applyCrossFillPower(t,s);break;case"fill-all":this.applyFillAllPower();break;case"remove-row":this.applyRemoveRowPower(t);break;case"remove-column":this.applyRemoveColumnPower(s);break;case"fill-row":this.applyFillRowPower(t);break;case"fill-column":this.applyFillColumnPower(s);break}},applyBombPower(e,t){for(let s=e-1;s<=e+1;s++)for(let e=t-1;e<=t+1;e++)this.board[s]&&void 0!==this.board[s][e]&&(this.board[s][e]=null)},applyCrossBombPower(e,t){for(let s=0;s<this.board.length;s++)this.board[s][t]=null;for(let s=0;s<this.board[0].length;s++)this.board[e][s]=null},applyFillAllPower(){this.board=this.board.map((e=>e.map((e=>null===e?this.selectedShape.color:e))))},applyCrossFillPower(e,t){for(let s=0;s<this.board.length;s++)null===this.board[s][t]&&(this.board[s][t]=this.selectedShape.color);for(let s=0;s<this.board[0].length;s++)null===this.board[e][s]&&(this.board[e][s]=this.selectedShape.color)},applyFillBombPower(e,t){for(let s=e-1;s<=e+1;s++)for(let e=t-1;e<=t+1;e++)this.board[s]&&void 0!==this.board[s][e]&&null===this.board[s][e]&&(this.board[s][e]=this.selectedShape.color)},applyRemoveRowPower(e){this.removeRow(e)},applyFillRowPower(e){this.board[e]=this.board[e].map((e=>null===e?this.selectedShape.color:e))},applyFillColumnPower(e){this.board.forEach((t=>t[e]=null===t[e]?this.selectedShape.color:t[e]))},applyRemoveColumnPower(e){this.removeColumn(e)},checkBoardClear(){return this.board.every((e=>e.every((e=>null===e))))},checkCollision(e,t,s){for(let o=0;o<e.length;o++)for(let r=0;r<e[o].length;r++)if(1===e[o][r]&&(void 0===this.board[t+o]||void 0===this.board[t+o][s+r]||null!==this.board[t+o][s+r]))return!0;return!1},checkRows(){let e=[];for(let t=0;t<this.board.length;t++)this.board[t].every((e=>null!==e))&&e.push(t);return{completedRows:e.length,rowPositions:e}},removeRow(e){this.board[e].forEach(((t,s)=>{setTimeout((()=>{this.board[e].splice(s,1,null)}),10*s)}))},checkColumns(){let e=[];for(let t=0;t<this.board[0].length;t++)this.board.every((e=>null!==e[t]))&&e.push(t);return{completedColumns:e.length,colPositions:e}},removeColumn(e){this.board.forEach(((t,s)=>{setTimeout((()=>{this.board[s].splice(e,1,null)}),10*s)}))},checkGameOver(){for(let e of this.currentShapes)for(let t=0;t<=this.board.length-this.shapes[e.name].length;t++)for(let s=0;s<=this.board[0].length-this.shapes[e.name][0].length;s++)if(!this.checkCollision(this.shapes[e.name],t,s))return!1;return!0},handleShapeClicked(e){this.selectedShape={name:e.name,color:e.color,power:e.power,id:e.id}},handleShapeDragged(e){const t=parseFloat(e.offsetX),s=parseFloat(e.offsetY),o=this.$refs.gameBoard.$el.getBoundingClientRect(),r=e.clientX-o.left-t,i=e.clientY-o.top-s,l=Math.floor(i/40),a=Math.floor(r/40);this.updateHoverCells(this.shapes[this.selectedShape.name],l,a)},handleShapeDropped(e){const t=parseFloat(e.offsetX),s=parseFloat(e.offsetY),o=this.$refs.gameBoard.$el.getBoundingClientRect(),r=e.clientX-o.left-t,i=e.clientY-o.top-s,l=Math.floor(i/40),a=Math.floor(r/40);this.addShape(this.shapes[this.selectedShape.name],l,a),this.clearHoverCells()},handleDrop(e){const t=e.dataTransfer.getData("name");if(!t)return;const s=parseFloat(e.dataTransfer.getData("offsetX")),o=parseFloat(e.dataTransfer.getData("offsetY")),r=this.$refs.gameBoard.$el.getBoundingClientRect(),i=e.clientX-r.left-s,l=e.clientY-r.top-o,a=Math.floor(l/40),n=Math.floor(i/40);this.addShape(this.shapes[t],a,n),this.clearHoverCells()},removeShape(e){const t=this.currentShapes.findIndex((t=>t.id===e.id));t>-1&&this.currentShapes.splice(t,1)},getRandomShapes(){this.currentShapes=Array.from({length:3},(()=>{const e=this.selectedShapes[Math.floor(Math.random()*this.selectedShapes.length)];return{name:e,id:Date.now()+Math.random()}})),this.currentShapes.forEach((e=>{e.color=this.colors[Math.floor(Math.random()*this.colors.length)]})),this.currentShapes.forEach((e=>{"single"===e.name&&(e.power=this.powers[Math.floor(Math.random()*this.powers.length)])})),this.checkGameOver()&&this.getRandomShapes(),this.rowsOrColumnsCompleted=!1},applyCellStyle(e){return null!==e?{background:`linear-gradient(145deg, ${e}, ${e} 50%, ${e} 50%, ${e} 100%)`}:{}},updateHoverCells(e,t,s){if(this.hoverCells=[],!this.checkCollision(e,t,s)){for(let o=0;o<e.length;o++)for(let r=0;r<e[o].length;r++)1===e[o][r]&&this.hoverCells.push({row:t+o,col:s+r});this.selectedShape.power&&this.addPowerHoverCells(t,s,this.selectedShape.power)}},addPowerHoverCells(e,t,s){const o=(e,t,s,o,r)=>{for(let i=e;i<=t;i++)for(let e=s;e<=o;e++)this.board[i]&&void 0!==this.board[i][e]&&this.hoverCells.push({row:i,col:e,remove:r})};switch(s){case"bomb":o(e-1,e+1,t-1,t+1,!0);break;case"cross-bomb":o(0,this.board.length-1,t,t,!0),o(e,e,0,this.board[0].length-1,!0);break;case"cross-fill":o(0,this.board.length-1,t,t,!1),o(e,e,0,this.board[0].length-1,!1);break;case"fill-all":this.hoverCells=this.board.flatMap(((e,t)=>e.map(((e,s)=>({row:t,col:s,remove:!1})))));break;case"remove-row":o(e,e,0,this.board[0].length-1,!0);break;case"remove-column":o(0,this.board.length-1,t,t,!0);break;case"fill-row":o(e,e,0,this.board[0].length-1,!1);break;case"fill-column":o(0,this.board.length-1,t,t,!1);break;case"fill-bomb":o(e-1,e+1,t-1,t+1,!1);break;default:break}},clearHoverCells(){this.hoverCells=[]},saveHistory(){this.history.push({board:JSON.parse(JSON.stringify(this.board)),score:this.score,combo:this.combo,rowsOrColumnsCompleted:this.rowsOrColumnsCompleted,currentShapes:JSON.parse(JSON.stringify(this.currentShapes))})},saveState(){const e={board:JSON.parse(JSON.stringify(this.board)),score:this.score,currentShapes:JSON.parse(JSON.stringify(this.currentShapes)),selectedShape:this.selectedShape,history:JSON.parse(JSON.stringify(this.history)),selectedShapes:this.selectedShapes,highScore:this.highScore,combo:this.combo,rowsOrColumnsCompleted:this.rowsOrColumnsCompleted};localStorage.setItem("gameState",JSON.stringify(e))},undoMove(){if(this.history.length>0){const e=this.history.pop();this.board=e.board,this.score=e.score,this.currentShapes=e.currentShapes,this.gameOver=!1,this.combo=e.combo,this.rowsOrColumnsCompleted=e.rowsOrColumnsCompleted}},openCustomPieceCreator(){this.isCustomPieceCreatorVisible=!0},handleCustomPieceSave(e){this.isCustomPieceCreatorVisible=!1;const t=e.map((e=>e.map((e=>e?1:0))));this.shapes.custom=t,this.currentShapes.push({name:"custom",color:"#"+Math.floor(16777215*Math.random()).toString(16)}),this.saveState()},handleCustomPieceCancel(){this.isCustomPieceCreatorVisible=!1},openSelectShapes(){this.isSelectShapesVisible=!0},handleSelectShapesSave(e){this.isSelectShapesVisible=!1,this.selectedShapes=e,this.getRandomShapes(),this.saveState()},handleSelectShapesCancel(){this.isSelectShapesVisible=!1},showScoreAnimation(e,t,s,o,r){const i={points:e,row:t,col:s,isRow:o,text:r,id:Date.now()};this.scoreAnimations.push(i),setTimeout((()=>{this.scoreAnimations=this.scoreAnimations.filter((e=>e.id!==i.id))}),2e3)},getAnimationStyle(e){const t=40,s=e.isRow?e.row*t:4*t,o=e.isRow?4*t:(e.col+1)*t;return{top:`${s}px`,left:`${o}px`,transition:"transform 0.5s, opacity 0.5s",opacity:1}}},mounted(){const e=localStorage.getItem("gameState");if(e){const t=JSON.parse(e);this.board=t.board,this.score=t.score,this.currentShapes=t.currentShapes,this.selectedShape=t.selectedShape,this.history=t.history,this.selectedShapes=t.selectedShapes,this.highScore=t.highScore,this.combo=t.combo,this.rowsOrColumnsCompleted=t.rowsOrColumnsCompleted}else this.selectedShapes=Object.keys(this.shapes),this.resetBoard()}};const Z=(0,f.A)(z,[["render",p]]);var ee=Z,te={name:"App",components:{GameBoard:ee}};const se=(0,f.A)(te,[["render",i]]);var oe=se;(0,o.Ef)(oe).mount("#app")}},t={};function s(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,o,r,i){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],r=e[c][1],i=e[c][2];for(var a=!0,n=0;n<o.length;n++)(!1&i||l>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[n])}))?o.splice(n--,1):(a=!1,i<l&&(l=i));if(a){e.splice(c--,1);var h=r();void 0!==h&&(t=h)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,r,i]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var r,i,l=o[0],a=o[1],n=o[2],h=0;if(l.some((function(t){return 0!==e[t]}))){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(n)var c=n(s)}for(t&&t(o);h<l.length;h++)i=l[h],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(c)},o=self["webpackChunkpower_blocks"]=self["webpackChunkpower_blocks"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(6601)}));o=s.O(o)})();
//# sourceMappingURL=app.8a0ee258.js.map